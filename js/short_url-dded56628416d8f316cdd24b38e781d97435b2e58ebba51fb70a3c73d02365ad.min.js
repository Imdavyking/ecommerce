function asyncGeneratorStep(e,t,r,n,o,u,a){try{var c=e[u](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(c){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=c.apply(e,a);function o(e){asyncGeneratorStep(n,t,r,o,u,"next",e)}function u(e){asyncGeneratorStep(n,t,r,o,u,"throw",e)}o(void 0)})}}var shortenUrlOutput=document.querySelector(".shortened-link-result"),cacheBuster=JSON.parse(document.querySelector("#cache-busting-images").innerText);document.querySelector("#link-shortener").addEventListener("submit",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n,o,u,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=t.target.querySelector("button[type=submit]"),n=r.innerText,r.innerHTML="<img src='".concat(cacheBuster["/img/loading.gif"],"' id='loading_network'>"),(shortenUrlOutput.textContent="")===(o=document.querySelector(".shortenurl-url").value.trim()))return e.abrupt("return",shortenUrlOutput.textContent="Please enter a url");e.next=8;break;case 8:return e.next=10,fetch("/api/short_url?url=".concat(encodeURIComponent(o)),{method:"POST",headers:{"X-Requested-For":"AsyncSearch"}});case 10:return u=e.sent,e.next=13,u.json();case 13:a=e.sent,shortenUrlOutput.textContent=a.message,r.innerHTML=n;case 16:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());