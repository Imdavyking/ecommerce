function asyncGeneratorStep(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function _asyncToGenerator(i){return function(){var e=this,c=arguments;return new Promise(function(t,n){var r=i.apply(e,c);function a(e){asyncGeneratorStep(r,t,n,a,o,"next",e)}function o(e){asyncGeneratorStep(r,t,n,a,o,"throw",e)}a(void 0)})}}var _document$querySelect,_document$querySelect2;function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function asyncGeneratorStep(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function _asyncToGenerator(i){return function(){var e=this,c=arguments;return new Promise(function(t,n){var r=i.apply(e,c);function a(e){asyncGeneratorStep(r,t,n,a,o,"next",e)}function o(e){asyncGeneratorStep(r,t,n,a,o,"throw",e)}a(void 0)})}}document.querySelectorAll(".newsletter__link").forEach(function(o){return o.addEventListener("click",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=o.parentElement.querySelector(".newsletter__email").value,e.next=4,fetch("/api/newsletter_signup",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({email:n,csrfToken:document.querySelector("[id='csrf_token']").getAttribute("content")})});case 4:return r=e.sent,e.next=7,r.json();case 7:"success"===(a=e.sent).status?swal({title:"Subscription almost done",text:"".concat(n," has been subscribed check your email to verify "),icon:"success"}):swal({title:"Error",text:a.error,icon:"error"});case 9:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())});var navOpen=document.querySelector(".nav__hamburger"),navClose=document.querySelector(".close__toggle"),menu=document.querySelector(".nav__menu"),scrollLink=document.querySelectorAll(".scroll-link"),navContainer=document.querySelector(".nav__menu");navOpen.addEventListener("click",function(){menu.classList.add("open"),document.body.classList.add("active"),navContainer.style.left="0",navContainer.style.width="30rem"}),navClose.addEventListener("click",function(){menu.classList.remove("open"),document.body.classList.remove("active"),navContainer.style.left="-30rem",navContainer.style.width="0"});var popup=document.querySelector(".popup"),closePopup=document.querySelector(".popup__close");popup&&(closePopup.addEventListener("click",function(){popup.classList.add("hide__popup")}),window.addEventListener("load",function(){setTimeout(function(){null===localStorage.getItem("popupExpirationInMilliseconds")?(localStorage.setItem("popupExpirationInMilliseconds",Date.now()/1e3+2592e3),popup.classList.remove("hide__popup")):Date.now()/1e3>+localStorage.getItem("popupExpirationInMilliseconds")&&(popup.classList.remove("hide__popup"),localStorage.setItem("popupExpirationInMilliseconds",Date.now()/1e3+2592e3))},500)}));var navBar=document.querySelector(".navigation"),gotoTop=document.querySelector(".goto-top"),htmlSpecialChars=function(e){return"string"==typeof e?e.replace(/[&<>"']/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"}[e]}):e};Array.from(scrollLink).map(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=e.currentTarget.getAttribute("href").slice(1);""===t&&(window.location=e.currentTarget.getAttribute("href"));var n=document.getElementById(t),r=navBar.getBoundingClientRect().height,a=navBar.classList.contains("fix__nav"),o=n.offsetTop-r;a||(o-=r),window.scrollTo({left:0,top:o}),navContainer.style.left="-30rem",document.body.classList.remove("active")})}),window.addEventListener("scroll",function(e){var t=window.pageYOffset;navBar.getBoundingClientRect().height<t?navBar.classList.add("fix__nav"):navBar.classList.remove("fix__nav"),300<t?gotoTop.classList.add("show-top"):gotoTop.classList.remove("show-top")});var testimonial=document.querySelector(".testimonial");null!==testimonial&&(testimonial.style.background="url(".concat(JSON.parse(document.querySelector("#cache-busting-images").innerText)["/img/testimonial.jpg"],") center/cover no-repeat"));var addRating=function(){var e=document.querySelectorAll(".stars-inner");0!==e.length&&e.forEach(function(e){e.style.width="".concat(Math.trunc(e.dataset.rating/5*100),"%")})};addRating(),function(e){function t(){return a.classList.toggle("hiding"),a.classList.toggle("showing"),a.addEventListener("transitionend",function(e){a.classList.contains("showing")?e.focus():e.blur()}.bind(null,o),!1),!1}var n=e.querySelector(".button-open"),r=e.querySelector(".button-close"),a=e.querySelector(".overlay"),o=e.querySelector(".input-search");n.addEventListener("click",t,!1),r.addEventListener("click",t,!1)}((window,document)),document.getElementsByClassName("input-search")[0].addEventListener("input",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/search?page=1&query=".concat(encodeURIComponent(t.target.value.trim())));case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,""===t.target.value.trim()||"success"!==r.status)return e.abrupt("return",document.getElementsByClassName("autocomplelete-search")[0].innerHTML="");e.next=8;break;case 8:document.getElementsByClassName("autocomplelete-search")[0].innerHTML=r.products.map(function(e){return'<a href="/house/search?page=1&query='.concat(encodeURIComponent(e.title),'" class="autocomplete-search-links">\n        ').concat(htmlSpecialChars(e.title),"\n        </a>")}).join("");case 9:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());var shippingFee=+(null===(_document$querySelect=document.querySelector("#shipping-fee"))||void 0===_document$querySelect||null===(_document$querySelect2=_document$querySelect.dataset)||void 0===_document$querySelect2?void 0:_document$querySelect2.fee),upDateTotalPrice=function(){var e=document.querySelector(".check__shipping__checkbox").checked;document.querySelector(".shipping__fee").innerText="$".concat(e?shippingFee:0),document.querySelector(".subtotal").innerText="$".concat(new Intl.NumberFormat("en-US").format(_toConsumableArray(document.querySelectorAll(".updated__price")).reduce(function(e,t){return e+parseInt(t.innerText.substr(1).replace(/,/gi,""),10)},0))),document.querySelector(".total__cost").innerText="$".concat(new Intl.NumberFormat("en-US").format(+document.querySelector(".subtotal").innerText.substr(1).replace(/,/gi,"")+(e?shippingFee:0)))},upDateUserQuantity=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/update_quantity",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({itemId:t,userId:document.body.dataset.userid.trim(),csrfToken:document.querySelector("[id='csrf_token']").getAttribute("content"),quantity:n})});case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",a.status);case 7:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}(),counterBtns=document.querySelectorAll(".counter-btn");0!==counterBtns.length&&counterBtns.forEach(function(n){n.addEventListener("change",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.parentElement.parentElement.parentElement.parentElement,n.value=parseInt(n.value,10),(isNaN(n.value)||""===n.value.trim()||10<+n.value)&&(n.value=1),console.log(t),e.next=6,upDateUserQuantity(t.querySelector("[data-id]").dataset.id,+n.value);case 6:if("success"!==e.sent)return e.abrupt("return");e.next=9;break;case 9:try{t.querySelector(".updated__price").innerText="$".concat(new Intl.NumberFormat("en-US").format(t.querySelector("[data-price]").dataset.price*n.value))}catch(e){}try{upDateTotalPrice()}catch(e){}case 11:case"end":return e.stop()}},e)})))});var updateCounter=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.parentElement,counterBtn=r.querySelector(".counter-btn"),10<+counterBtn.value+1&&"plus"===t)return e.abrupt("return");e.next=4;break;case 4:if(counterBtn.value-1<1&&"minus"===t)return e.abrupt("return");e.next=6;break;case 6:"minus"===t&&(counterBtn.value=counterBtn.value-1),"plus"===t&&(counterBtn.value=+counterBtn.value+1);try{r.parentElement.parentElement.parentElement.querySelector(".updated__price").innerText="$".concat(new Intl.NumberFormat("en-US").format(r.parentElement.parentElement.parentElement.querySelector(".new__price").dataset.price*counterBtn.value))}catch(e){}return e.next=11,upDateUserQuantity(r.parentElement.parentElement.parentElement.querySelector("[data-id]").dataset.id,+counterBtn.value);case 11:try{upDateTotalPrice()}catch(e){}case 12:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}();document.querySelectorAll(".plus-btn").forEach(function(t){return t.addEventListener("click",function(e){updateCounter("plus",t)})}),document.querySelectorAll(".minus-btn").forEach(function(t){return t.addEventListener("click",function(e){updateCounter("minus",t)})});var COOKIE_DURATION=15811200,COOKIE_NAME="complianceCookie",COOKIE_VALUE="on",COOKIE_BANNER=document.querySelector(".cookie-banner"),CLOSE_COOKIE_BANNER=document.querySelector(".close-cookie-banner"),CREATE_COOKIE=function(e,t,n){document.cookie="".concat(e,"=").concat(t,";max-age=").concat(n,"; path=/;secure")},CHECK_COOKIE=function(t){return t+="=",document.cookie.split(";").map(function(e){for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}).join("")},ERASE_COOKIE=function(e){return CREATE_COOKIE(e,"",-1)};addEventListener("DOMContentLoaded",function(){CHECK_COOKIE(COOKIE_NAME)!==COOKIE_VALUE&&(COOKIE_BANNER.style.display="block")});var REMOVE_COOKIE_CONTAINER=function(){return document.querySelector("#cookie-law").remove()};function asyncGeneratorStep(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function _asyncToGenerator(i){return function(){var e=this,c=arguments;return new Promise(function(t,n){var r=i.apply(e,c);function a(e){asyncGeneratorStep(r,t,n,a,o,"next",e)}function o(e){asyncGeneratorStep(r,t,n,a,o,"throw",e)}a(void 0)})}}COOKIE_BANNER&&CLOSE_COOKIE_BANNER.addEventListener("click",function(){CREATE_COOKIE(COOKIE_NAME,COOKIE_VALUE,COOKIE_DURATION),REMOVE_COOKIE_CONTAINER()});var getProducts=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/products",{credentials:"same-origin"});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n.products);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),categoryCenter=document.querySelector(".category__center"),productsIdInCart=JSON.parse(document.body.dataset.usercartitemsids),cartTotal=document.querySelector("#cart__total"),displayProductItems=function(e){location.pathname.startsWith("/house/search")||categoryCenter&&(categoryCenter.innerHTML=e.map(function(e){return' \n                  <div class="product category__products">\n                    <div class="product__header">\n                      <img src="'.concat(htmlSpecialChars(e.image),'" alt="').concat(htmlSpecialChars(e.title),'">\n                    </div>\n                    <div class="product__footer">\n                      <h3>').concat(htmlSpecialChars(e.title),'</h3>\n                      <div class="rating">\n                        <div class="stars-outer">\n                          <div class="stars-inner"  data-rating="').concat(htmlSpecialChars(e.rating),'"></div>\n                        </div>\n                      </div>\n                      <div class="product__price">\n                        <h4>$').concat(new Intl.NumberFormat("en-GB").format(htmlSpecialChars(e.price)),'</h4>\n                      </div>\n                      <a href="#"><button type="submit" class="product__btn" data-id=').concat(htmlSpecialChars(e.id),'>Add To Cart</button></a>\n                    </div>\n                  <ul>\n                      <li>\n                        <a data-tip="Quick View" data-place="left" href="/house/product.php?id=').concat(htmlSpecialChars(e.id),'">\n                          <svg>\n                            <use xlink:href="/img/sprite.svg#icon-eye"></use>\n                          </svg>\n                        </a>\n                      </li>\n                      <li>\n                        <a data-tip="Add To Wishlist" data-place="left" href="#">\n                          <svg>\n                            <use xlink:href="/img/sprite.svg#icon-heart-o"></use>\n                          </svg>\n                        </a>\n                      </li>\n                      <li>\n                        <a data-tip="Add To Compare" data-place="left" href="#">\n                          <svg>\n                            <use xlink:href="/img/sprite.svg#icon-loop2"></use>\n                          </svg>\n                        </a>\n                      </li>\n                  </ul>\n                  </div>\n                  ')}).join(""))},addItemToCart=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===document.body.dataset.userid.trim()&&(window.location="/house/login"),productsIdInCart.includes(t)){e.next=11;break}return e.next=4,fetch("/api/add_item",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({itemId:t,userId:document.body.dataset.userid.trim(),csrfToken:document.querySelector("[id='csrf_token']").getAttribute("content")})});case 4:return n=e.sent,e.next=7,n.json();case 7:"success"===e.sent.status&&(cartTotal.innerText=+cartTotal.innerText+1,productsIdInCart.push(t)),e.next=12;break;case 11:productsIdInCart.includes(t)?swal({title:"Added Already",text:"This product have been added already",icon:"info"}):swal({title:"Info",text:result.error,icon:"info"});case 12:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),filterBtn=document.querySelectorAll(".filter-btn"),categoryContainer=document.getElementById("category");categoryContainer&&categoryContainer.addEventListener("click",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.closest(".section__title")){e.next=3;break}return e.abrupt("return");case 3:return r=n.dataset.id,e.next=6,getProducts();case 6:a=e.sent,r&&(Array.from(filterBtn).forEach(function(e){e.classList.remove("active")}),n.classList.add("active"),o=a.filter(function(e){if(e.category===r)return e}),displayProductItems("All Products"===r?a:o));case 8:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());var pic1=document.getElementById("pic1"),pic2=document.getElementById("pic2"),pic3=document.getElementById("pic3"),pic4=document.getElementById("pic4"),pic5=document.getElementById("pic5"),picContainer=document.querySelector(".product__pictures"),zoom=document.getElementById("zoom"),pic=document.getElementById("pic"),picList=[pic1,pic2,pic3,pic4,pic5],picActive=1;["mouseover","touchstart"].forEach(function(e){picContainer&&picContainer.addEventListener(e,function(e){var t,n=e.target.closest("img");n&&(t=n.id.slice(3),changeImage(document.querySelector("#pic".concat(htmlSpecialChars(t))).getAttribute("src"),t))})});var changeImage=function(e,t){pic.src=e,zoom.style.backgroundImage="url(".concat(e,")"),picList[picActive-1].classList.remove("img-active"),picList[t-1].classList.add("img-active"),picActive=t},btns=document.querySelectorAll(".detail-btn"),detail=document.querySelector(".product-detail__bottom"),contents=document.querySelectorAll(".content");detail&&detail.addEventListener("click",function(t){var e,n=t.target.closest(".detail-btn");!n||(e=n.dataset.id)&&(Array.from(btns).forEach(function(e){e.classList.remove("active"),t.target.closest(".detail-btn").classList.add("active")}),Array.from(contents).forEach(function(e){e.classList.remove("active")}),document.getElementById(e).classList.add("active"))}),window.addEventListener("DOMContentLoaded",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,getProducts();case 2:t=e.sent,displayProductItems(t),addRating();case 5:case"end":return e.stop()}},e)}))),window.addEventListener("click",function(e){e.stopPropagation(),e.target.matches(".product__btn")&&(e.preventDefault(),addItemToCart(+e.target.dataset.id))});