function asyncGeneratorStep(e,t,r,n,o,s,a){try{var i=e[s](a),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(i){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=i.apply(e,a);function o(e){asyncGeneratorStep(n,t,r,o,s,"next",e)}function s(e){asyncGeneratorStep(n,t,r,o,s,"throw",e)}o(void 0)})}}var container=document.querySelector(".container"),getResetCode=document.querySelector(".get_reset_code"),changePasswordForm=document.querySelector(".change_password_form"),cacheBuster=JSON.parse(document.querySelector("#cache-busting-images").innerText);getResetCode.addEventListener("submit",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n,o,s,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=t.target.querySelector("button[type=submit]"),n=r.innerText,r.innerHTML="<img src='".concat(cacheBuster["/img/loading.gif"],"' id='loading_network'>"),e.next=6,fetch("/api/userEmailExists",{credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:document.querySelector(".get_reset_email").value,csrfToken:document.querySelector("[id='csrf_token']").getAttribute("content")})});case 6:return o=e.sent,e.next=9,o.json();case 9:if(e.sent.exists)return e.next=13,fetch("/api/get_reset_code",{credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:document.querySelector(".get_reset_email").value.trim(),csrfToken:document.querySelector("[id='csrf_token']").getAttribute("content")})});e.next=20;break;case 13:return s=e.sent,e.next=16,s.json();case 16:"success"!==(a=e.sent).status?(swal({title:"Error",text:a.error,icon:"error"}),r.innerHTML=n):container.classList.add("sign-up-mode"),e.next=22;break;case 20:swal({title:"Error while Sending Verification Code",text:"Email not registered",icon:"error"}),r.innerHTML=n;case 22:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()),changePasswordForm.addEventListener("submit",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n,o,s,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=t.target.querySelector("button[type=submit]"),n=r.innerText,r.innerHTML="<img src='".concat(cacheBuster["/img/loading.gif"],"' id='loading_network'>"),o=document.querySelector(".change_password").value.trim(),s=document.querySelector(".confirm_change_password").value.trim(),o!==s)return r.innerHTML=n,e.abrupt("return",swal({title:"Error while updating password",text:"Password and Confirmation password do not match",icon:"error"}));e.next=11;break;case 11:o.length<6&&(swal({title:"Error while registrating",text:"Password must be six(6) or more characters",icon:"error"}),r.innerHTML=n);case 12:return e.next=14,fetch("/api/change_password",{credentials:"same-origin",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reset_code:document.querySelector(".reset_code").value.trim(),change_password:o,csrfToken:document.querySelector("[id='csrf_token']").getAttribute("content")})});case 14:return a=e.sent,e.next=17,a.json();case 17:"success"===(i=e.sent).status?swal({title:"Success",text:"Password Changed successfully",icon:"success"}):swal({title:"Error while changing password",text:i.error,icon:"error"}),r.innerHTML=n;case 19:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());